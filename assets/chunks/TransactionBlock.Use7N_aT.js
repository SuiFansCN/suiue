import{g as yr}from"./theme.CohBgODB.js";function mr(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var n=0;n<e.length;n++){var i=e.charAt(n),s=i.charCodeAt(0);if(t[s]!==255)throw new TypeError(i+" is ambiguous");t[s]=n}var a=e.length,o=e.charAt(0),c=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function l(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var y=0,m=0,w=0,x=g.length;w!==x&&g[w]===0;)w++,y++;for(var A=(x-w)*f+1>>>0,N=new Uint8Array(A);w!==x;){for(var G=g[w],re=0,M=A-1;(G!==0||re<m)&&M!==-1;M--,re++)G+=256*N[M]>>>0,N[M]=G%a>>>0,G=G/a>>>0;if(G!==0)throw new Error("Non-zero carry");m=re,w++}for(var X=A-m;X!==A&&N[X]===0;)X++;for(var Be=o.repeat(y);X<A;++X)Be+=e.charAt(N[X]);return Be}function h(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;for(var y=0,m=0,w=0;g[y]===o;)m++,y++;for(var x=(g.length-y)*c+1>>>0,A=new Uint8Array(x);g[y];){var N=t[g.charCodeAt(y)];if(N===255)return;for(var G=0,re=x-1;(N!==0||G<w)&&re!==-1;re--,G++)N+=a*A[re]>>>0,A[re]=N%256>>>0,N=N/256>>>0;if(N!==0)throw new Error("Non-zero carry");w=G,y++}for(var M=x-w;M!==x&&A[M]===0;)M++;for(var X=new Uint8Array(m+(x-M)),Be=m;M!==x;)X[Be++]=A[M++];return X}function p(g){var y=h(g);if(y)return y;throw new Error("Non-base"+a+" character")}return{encode:l,decodeUnsafe:h,decode:p}}var wr=mr;const br=wr,Sr="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";var vr=br(Sr);const Vt=yr(vr),xe=e=>Vt.encode(e),at=e=>Vt.decode(e);function ae(e){return Uint8Array.from(atob(e),t=>t.charCodeAt(0))}const Fe=8192;function Ae(e){if(e.length<Fe)return btoa(String.fromCharCode(...e));let t="";for(var r=0;r<e.length;r+=Fe){const n=e.slice(r,r+Fe);t+=String.fromCharCode(...n)}return btoa(t)}function He(e){var i;const t=e.startsWith("0x")?e.slice(2):e,n=((i=(t.length%2===0?t:`0${t}}`).match(/.{2}/g))==null?void 0:i.map(s=>parseInt(s,16)))??[];return Uint8Array.from(n)}function Oe(e){return e.reduce((t,r)=>t+r.toString(16).padStart(2,"0"),"")}function ot(e){let t=[],r=0;if(e===0)return[0];for(;e>0;)t[r]=e&127,(e>>=7)&&(t[r]|=128),r+=1;return t}function Tr(e){let t=0,r=0,n=0;for(;;){let i=e[n];if(n+=1,t|=(i&127)<<r,!(i&128))break;r+=7}return{value:t,length:n}}class Lt{constructor(t){this.bytePosition=0,this.dataView=new DataView(t.buffer)}shift(t){return this.bytePosition+=t,this}read8(){let t=this.dataView.getUint8(this.bytePosition);return this.shift(1),t}read16(){let t=this.dataView.getUint16(this.bytePosition,!0);return this.shift(2),t}read32(){let t=this.dataView.getUint32(this.bytePosition,!0);return this.shift(4),t}read64(){let t=this.read32(),n=this.read32().toString(16)+t.toString(16).padStart(8,"0");return BigInt("0x"+n).toString(10)}read128(){let t=BigInt(this.read64()),n=BigInt(this.read64()).toString(16)+t.toString(16).padStart(16,"0");return BigInt("0x"+n).toString(10)}read256(){let t=BigInt(this.read128()),n=BigInt(this.read128()).toString(16)+t.toString(16).padStart(32,"0");return BigInt("0x"+n).toString(10)}readBytes(t){let r=this.bytePosition+this.dataView.byteOffset,n=new Uint8Array(this.dataView.buffer,r,t);return this.shift(t),n}readULEB(){let t=this.bytePosition+this.dataView.byteOffset,r=new Uint8Array(this.dataView.buffer,t),{value:n,length:i}=Tr(r);return this.shift(i),n}readVec(t){let r=this.readULEB(),n=[];for(let i=0;i<r;i++)n.push(t(this,i,r));return n}}function Er(e,t){switch(t){case"base58":return xe(e);case"base64":return Ae(e);case"hex":return Oe(e);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}function xr(e,t){switch(t){case"base58":return at(e);case"base64":return ae(e);case"hex":return He(e);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}function Gt(e,t=["<",">"]){const[r,n]=t,i=[];let s="",a=0;for(let o=0;o<e.length;o++){const c=e[o];if(c===r&&a++,c===n&&a--,a===0&&c===","){i.push(s.trim()),s="";continue}s+=c}return i.push(s.trim()),i}class Kt{constructor({size:t=1024,maxSize:r,allocateSize:n=1024}={}){this.bytePosition=0,this.size=t,this.maxSize=r||t,this.allocateSize=n,this.dataView=new DataView(new ArrayBuffer(t))}ensureSizeOrGrow(t){const r=this.bytePosition+t;if(r>this.size){const n=Math.min(this.maxSize,this.size+this.allocateSize);if(r>n)throw new Error(`Attempting to serialize to BCS, but buffer does not have enough size. Allocated size: ${this.size}, Max size: ${this.maxSize}, Required size: ${r}`);this.size=n;const i=new ArrayBuffer(this.size);new Uint8Array(i).set(new Uint8Array(this.dataView.buffer)),this.dataView=new DataView(i)}}shift(t){return this.bytePosition+=t,this}write8(t){return this.ensureSizeOrGrow(1),this.dataView.setUint8(this.bytePosition,Number(t)),this.shift(1)}write16(t){return this.ensureSizeOrGrow(2),this.dataView.setUint16(this.bytePosition,Number(t),!0),this.shift(2)}write32(t){return this.ensureSizeOrGrow(4),this.dataView.setUint32(this.bytePosition,Number(t),!0),this.shift(4)}write64(t){return We(BigInt(t),8).forEach(r=>this.write8(r)),this}write128(t){return We(BigInt(t),16).forEach(r=>this.write8(r)),this}write256(t){return We(BigInt(t),32).forEach(r=>this.write8(r)),this}writeULEB(t){return ot(t).forEach(r=>this.write8(r)),this}writeVec(t,r){return this.writeULEB(t.length),Array.from(t).forEach((n,i)=>r(this,n,i,t.length)),this}*[Symbol.iterator](){for(let t=0;t<this.bytePosition;t++)yield this.dataView.getUint8(t);return this.toBytes()}toBytes(){return new Uint8Array(this.dataView.buffer.slice(0,this.bytePosition))}toString(t){return Er(this.toBytes(),t)}}function We(e,t){let r=new Uint8Array(t),n=0;for(;e>0;)r[n]=Number(e%BigInt(256)),e=e/BigInt(256),n+=1;return r}var Ht=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},z=(e,t,r)=>(Ht(e,t,"read from private field"),r?r.call(e):t.get(e)),Me=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},De=(e,t,r,n)=>(Ht(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),de,pe,$e,se;const Ft=class{constructor(e){Me(this,de,void 0),Me(this,pe,void 0),this.name=e.name,this.read=e.read,this.serializedSize=e.serializedSize??(()=>null),De(this,de,e.write),De(this,pe,e.serialize??((t,r)=>{const n=new Kt({size:this.serializedSize(t)??void 0,...r});return z(this,de).call(this,t,n),n.toBytes()})),this.validate=e.validate??(()=>{})}write(e,t){this.validate(e),z(this,de).call(this,e,t)}serialize(e,t){return this.validate(e),new Ar(this,z(this,pe).call(this,e,t))}parse(e){const t=new Lt(e);return this.read(t)}transform({name:e,input:t,output:r}){return new Ft({name:e??this.name,read:n=>r(this.read(n)),write:(n,i)=>z(this,de).call(this,t(n),i),serializedSize:n=>this.serializedSize(t(n)),serialize:(n,i)=>z(this,pe).call(this,t(n),i),validate:n=>this.validate(t(n))})}};let P=Ft;de=new WeakMap;pe=new WeakMap;const Wt=Symbol.for("@mysten/serialized-bcs");function ct(e){return!!e&&typeof e=="object"&&e[Wt]===!0}class Ar{constructor(t,r){Me(this,$e,void 0),Me(this,se,void 0),De(this,$e,t),De(this,se,r)}get[Wt](){return!0}toBytes(){return z(this,se)}toHex(){return Oe(z(this,se))}toBase64(){return Ae(z(this,se))}toBase58(){return xe(z(this,se))}parse(){return z(this,$e).parse(z(this,se))}}$e=new WeakMap;se=new WeakMap;function ze({size:e,...t}){return new P({...t,serializedSize:()=>e})}function Xe({readMethod:e,writeMethod:t,...r}){return ze({...r,read:n=>n[e](),write:(n,i)=>i[t](n),validate:n=>{var i;if(n<0||n>r.maxValue)throw new TypeError(`Invalid ${r.name} value: ${n}. Expected value in range 0-${r.maxValue}`);(i=r.validate)==null||i.call(r,n)}})}function Je({readMethod:e,writeMethod:t,...r}){return ze({...r,read:n=>n[e](),write:(n,i)=>i[t](BigInt(n)),validate:n=>{var s;const i=BigInt(n);if(i<0||i>r.maxValue)throw new TypeError(`Invalid ${r.name} value: ${i}. Expected value in range 0-${r.maxValue}`);(s=r.validate)==null||s.call(r,i)}})}function Or({serialize:e,...t}){const r=new P({...t,serialize:e,write:(n,i)=>{for(const s of r.serialize(n).toBytes())i.write8(s)}});return r}function Ir({toBytes:e,fromBytes:t,...r}){return new P({...r,read:n=>{const i=n.readULEB(),s=n.readBytes(i);return t(s)},write:(n,i)=>{const s=e(n);i.writeULEB(s.length);for(let a=0;a<s.length;a++)i.write8(s[a])},serialize:n=>{const i=e(n),s=ot(i.length),a=new Uint8Array(s.length+i.length);return a.set(s,0),a.set(i,s.length),a},validate:n=>{var i;if(typeof n!="string")throw new TypeError(`Invalid ${r.name} value: ${n}. Expected string`);(i=r.validate)==null||i.call(r,n)}})}function Br(e){let t=null;function r(){return t||(t=e()),t}return new P({name:"lazy",read:n=>r().read(n),serializedSize:n=>r().serializedSize(n),write:(n,i)=>r().write(n,i),serialize:(n,i)=>r().serialize(n,i).toBytes()})}const u={u8(e){return Xe({name:"u8",readMethod:"read8",writeMethod:"write8",size:1,maxValue:2**8-1,...e})},u16(e){return Xe({name:"u16",readMethod:"read16",writeMethod:"write16",size:2,maxValue:2**16-1,...e})},u32(e){return Xe({name:"u32",readMethod:"read32",writeMethod:"write32",size:4,maxValue:2**32-1,...e})},u64(e){return Je({name:"u64",readMethod:"read64",writeMethod:"write64",size:8,maxValue:2n**64n-1n,...e})},u128(e){return Je({name:"u128",readMethod:"read128",writeMethod:"write128",size:16,maxValue:2n**128n-1n,...e})},u256(e){return Je({name:"u256",readMethod:"read256",writeMethod:"write256",size:32,maxValue:2n**256n-1n,...e})},bool(e){return ze({name:"bool",size:1,read:t=>t.read8()===1,write:(t,r)=>r.write8(t?1:0),...e,validate:t=>{var r;if((r=e==null?void 0:e.validate)==null||r.call(e,t),typeof t!="boolean")throw new TypeError(`Expected boolean, found ${typeof t}`)}})},uleb128(e){return Or({name:"uleb128",read:t=>t.readULEB(),serialize:t=>Uint8Array.from(ot(t)),...e})},bytes(e,t){return ze({name:`bytes[${e}]`,size:e,read:r=>r.readBytes(e),write:(r,n)=>{for(let i=0;i<e;i++)n.write8(r[i]??0)},...t,validate:r=>{var n;if((n=t==null?void 0:t.validate)==null||n.call(t,r),!("length"in r))throw new TypeError(`Expected array, found ${typeof r}`);if(r.length!==e)throw new TypeError(`Expected array of length ${e}, found ${r.length}`)}})},string(e){return Ir({name:"string",toBytes:t=>new TextEncoder().encode(t),fromBytes:t=>new TextDecoder().decode(t),...e})},fixedArray(e,t,r){return new P({name:`${t.name}[${e}]`,read:n=>{const i=new Array(e);for(let s=0;s<e;s++)i[s]=t.read(n);return i},write:(n,i)=>{for(const s of n)t.write(s,i)},...r,validate:n=>{var i;if((i=r==null?void 0:r.validate)==null||i.call(r,n),!("length"in n))throw new TypeError(`Expected array, found ${typeof n}`);if(n.length!==e)throw new TypeError(`Expected array of length ${e}, found ${n.length}`)}})},option(e){return u.enum(`Option<${e.name}>`,{None:null,Some:e}).transform({input:t=>t==null?{None:!0}:{Some:t},output:t=>"Some"in t?t.Some:null})},vector(e,t){return new P({name:`vector<${e.name}>`,read:r=>{const n=r.readULEB(),i=new Array(n);for(let s=0;s<n;s++)i[s]=e.read(r);return i},write:(r,n)=>{n.writeULEB(r.length);for(const i of r)e.write(i,n)},...t,validate:r=>{var n;if((n=t==null?void 0:t.validate)==null||n.call(t,r),!("length"in r))throw new TypeError(`Expected array, found ${typeof r}`)}})},tuple(e,t){return new P({name:`(${e.map(r=>r.name).join(", ")})`,serializedSize:r=>{let n=0;for(let i=0;i<e.length;i++){const s=e[i].serializedSize(r[i]);if(s==null)return null;n+=s}return n},read:r=>{const n=[];for(const i of e)n.push(i.read(r));return n},write:(r,n)=>{for(let i=0;i<e.length;i++)e[i].write(r[i],n)},...t,validate:r=>{var n;if((n=t==null?void 0:t.validate)==null||n.call(t,r),!Array.isArray(r))throw new TypeError(`Expected array, found ${typeof r}`);if(r.length!==e.length)throw new TypeError(`Expected array of length ${e.length}, found ${r.length}`)}})},struct(e,t,r){const n=Object.entries(t);return new P({name:e,serializedSize:i=>{let s=0;for(const[a,o]of n){const c=o.serializedSize(i[a]);if(c==null)return null;s+=c}return s},read:i=>{const s={};for(const[a,o]of n)s[a]=o.read(i);return s},write:(i,s)=>{for(const[a,o]of n)o.write(i[a],s)},...r,validate:i=>{var s;if((s=r==null?void 0:r.validate)==null||s.call(r,i),typeof i!="object"||i==null)throw new TypeError(`Expected object, found ${typeof i}`)}})},enum(e,t,r){const n=Object.entries(t);return new P({name:e,read:i=>{const s=i.readULEB(),[a,o]=n[s];return{[a]:(o==null?void 0:o.read(i))??!0}},write:(i,s)=>{const[a,o]=Object.entries(i)[0];for(let c=0;c<n.length;c++){const[f,l]=n[c];if(f===a){s.writeULEB(c),l==null||l.write(o,s);return}}},...r,validate:i=>{var o;if((o=r==null?void 0:r.validate)==null||o.call(r,i),typeof i!="object"||i==null)throw new TypeError(`Expected object, found ${typeof i}`);const s=Object.keys(i);if(s.length!==1)throw new TypeError(`Expected object with one key, found ${s.length}`);const[a]=s;if(!Object.hasOwn(t,a))throw new TypeError(`Invalid enum variant ${a}`)}})},map(e,t){return u.vector(u.tuple([e,t])).transform({name:`Map<${e.name}, ${t.name}>`,input:r=>[...r.entries()],output:r=>{const n=new Map;for(const[i,s]of r)n.set(i,s);return n}})},generic(e,t){return(...r)=>t(...r).transform({name:`${t.name}<${r.map(n=>n.name).join(", ")}>`,input:n=>n,output:n=>n})},lazy(e){return Br(e)}},jr=32,ye=class{constructor(e){if(this.types=new Map,this.counter=0,e instanceof ye){this.schema=e.schema,this.types=new Map(e.types);return}if(this.schema=e,this.registerAddressType(ye.ADDRESS,e.addressLength,e.addressEncoding),this.registerVectorType(e.vectorType),e.types&&e.types.structs)for(let t of Object.keys(e.types.structs))this.registerStructType(t,e.types.structs[t]);if(e.types&&e.types.enums)for(let t of Object.keys(e.types.enums))this.registerEnumType(t,e.types.enums[t]);if(e.types&&e.types.aliases)for(let t of Object.keys(e.types.aliases))this.registerAlias(t,e.types.aliases[t]);e.withPrimitives!==!1&&Ur(this)}tempKey(){return`bcs-struct-${++this.counter}`}ser(e,t,r){if(typeof e=="string"||Array.isArray(e)){const{name:n,params:i}=this.parseTypeName(e);return this.getTypeInterface(n).encode(this,t,r,i)}if(typeof e=="object"){const n=this.tempKey();return new ye(this).registerStructType(n,e).ser(n,t,r)}throw new Error(`Incorrect type passed into the '.ser()' function. 
${JSON.stringify(e)}`)}de(e,t,r){if(typeof t=="string")if(r)t=xr(t,r);else throw new Error("To pass a string to `bcs.de`, specify encoding");if(typeof e=="string"||Array.isArray(e)){const{name:n,params:i}=this.parseTypeName(e);return this.getTypeInterface(n).decode(this,t,i)}if(typeof e=="object"){const n=new ye(this),i=this.tempKey();return n.registerStructType(i,e).de(i,t,r)}throw new Error(`Incorrect type passed into the '.de()' function. 
${JSON.stringify(e)}`)}hasType(e){return this.types.has(e)}registerAlias(e,t){return this.types.set(e,t),this}registerType(e,t,r,n=()=>!0){const{name:i,params:s}=this.parseTypeName(e);return this.types.set(i,{encode(a,o,c,f){const l=s.reduce((h,p,g)=>Object.assign(h,{[p]:f[g]}),{});return this._encodeRaw.call(a,new Kt(c),o,f,l)},decode(a,o,c){const f=s.reduce((l,h,p)=>Object.assign(l,{[h]:c[p]}),{});return this._decodeRaw.call(a,new Lt(o),c,f)},_encodeRaw(a,o,c,f){if(n(o))return t.call(this,a,o,c,f);throw new Error(`Validation failed for type ${i}, data: ${o}`)},_decodeRaw(a,o,c){return r.call(this,a,o,c)}}),this}registerBcsType(e,t){return this.registerType(e,(r,n,i)=>{const s=i.map(a=>new P({name:String(a),write:(o,c)=>{const{name:f,params:l}=this.parseTypeName(a),h=this.getTypeInterface(f),p=l.reduce((g,y,m)=>Object.assign(g,{[y]:i[m]}),{});return h._encodeRaw.call(this,c,o,l,p)},read:()=>{throw new Error("Not implemented")}}));return t(...s).write(n,r),r},(r,n)=>{const i=n.map(s=>new P({name:String(s),write:(a,o)=>{throw new Error("Not implemented")},read:a=>{const{name:o,params:c}=this.parseTypeName(s),f=this.getTypeInterface(o),l=c.reduce((h,p,g)=>Object.assign(h,{[p]:n[g]}),{});return f._decodeRaw.call(this,a,c,l)}}));return t(...i).read(r)}),this}registerAddressType(e,t,r="hex"){switch(r){case"base64":return this.registerType(e,function(i,s){return ae(s).reduce((a,o)=>a.write8(o),i)},function(i){return Ae(i.readBytes(t))});case"hex":return this.registerType(e,function(i,s){return He(s).reduce((a,o)=>a.write8(o),i)},function(i){return Oe(i.readBytes(t))});default:throw new Error("Unsupported encoding! Use either hex or base64")}}registerVectorType(e){let{name:t,params:r}=this.parseTypeName(e);if(r.length>1)throw new Error("Vector can have only one type parameter; got "+t);return this.registerType(e,function(i,s,a,o){return i.writeVec(s,(c,f)=>{let l=a[0];if(!l)throw new Error(`Incorrect number of type parameters passed a to vector '${e}'`);let{name:h,params:p}=this.parseTypeName(l);if(this.hasType(h))return this.getTypeInterface(h)._encodeRaw.call(this,c,f,p,o);if(!(h in o))throw new Error(`Unable to find a matching type definition for ${h} in vector; make sure you passed a generic`);let{name:g,params:y}=this.parseTypeName(o[h]);return this.getTypeInterface(g)._encodeRaw.call(this,c,f,y,o)})},function(i,s,a){return i.readVec(o=>{let c=s[0];if(!c)throw new Error(`Incorrect number of type parameters passed to a vector '${e}'`);let{name:f,params:l}=this.parseTypeName(c);if(this.hasType(f))return this.getTypeInterface(f)._decodeRaw.call(this,o,l,a);if(!(f in a))throw new Error(`Unable to find a matching type definition for ${f} in vector; make sure you passed a generic`);let{name:h,params:p}=this.parseTypeName(a[f]);return this.getTypeInterface(h)._decodeRaw.call(this,o,p,a)})})}registerStructType(e,t){for(let a in t){let o=this.tempKey(),c=t[a];!Array.isArray(c)&&typeof c!="string"&&(t[a]=o,this.registerStructType(o,c))}let r=Object.freeze(t),n=Object.keys(r),{name:i,params:s}=this.parseTypeName(e);return this.registerType(e,function(o,c,f,l){if(!c||c.constructor!==Object)throw new Error(`Expected ${i} to be an Object, got: ${c}`);if(f.length!==s.length)throw new Error(`Incorrect number of generic parameters passed; expected: ${s.length}, got: ${f.length}`);for(let h of n){if(!(h in c))throw new Error(`Struct ${i} requires field ${h}:${r[h]}`);const{name:p,params:g}=this.parseTypeName(r[h]);if(!s.includes(p))this.getTypeInterface(p)._encodeRaw.call(this,o,c[h],g,l);else{const y=s.indexOf(p);let{name:m,params:w}=this.parseTypeName(f[y]);if(this.hasType(m)){this.getTypeInterface(m)._encodeRaw.call(this,o,c[h],w,l);continue}if(!(m in l))throw new Error(`Unable to find a matching type definition for ${m} in ${i}; make sure you passed a generic`);let{name:x,params:A}=this.parseTypeName(l[m]);this.getTypeInterface(x)._encodeRaw.call(this,o,c[h],A,l)}}return o},function(o,c,f){if(c.length!==s.length)throw new Error(`Incorrect number of generic parameters passed; expected: ${s.length}, got: ${c.length}`);let l={};for(let h of n){const{name:p,params:g}=this.parseTypeName(r[h]);if(!s.includes(p))l[h]=this.getTypeInterface(p)._decodeRaw.call(this,o,g,f);else{const y=s.indexOf(p);let{name:m,params:w}=this.parseTypeName(c[y]);if(this.hasType(m)){l[h]=this.getTypeInterface(m)._decodeRaw.call(this,o,w,f);continue}if(!(m in f))throw new Error(`Unable to find a matching type definition for ${m} in ${i}; make sure you passed a generic`);let{name:x,params:A}=this.parseTypeName(f[m]);l[h]=this.getTypeInterface(x)._decodeRaw.call(this,o,A,f)}}return l})}registerEnumType(e,t){for(let a in t){let o=this.tempKey(),c=t[a];c!==null&&!Array.isArray(c)&&typeof c!="string"&&(t[a]=o,this.registerStructType(o,c))}let r=Object.freeze(t),n=Object.keys(r),{name:i,params:s}=this.parseTypeName(e);return this.registerType(e,function(o,c,f,l){if(!c)throw new Error(`Unable to write enum "${i}", missing data.
Received: "${c}"`);if(typeof c!="object")throw new Error(`Incorrect data passed into enum "${i}", expected object with properties: "${n.join(" | ")}".
Received: "${JSON.stringify(c)}"`);let h=Object.keys(c)[0];if(h===void 0)throw new Error(`Empty object passed as invariant of the enum "${i}"`);let p=n.indexOf(h);if(p===-1)throw new Error(`Unknown invariant of the enum "${i}", allowed values: "${n.join(" | ")}"; received "${h}"`);let g=n[p],y=r[g];if(o.write8(p),y===null)return o;let m=s.indexOf(y),w=m===-1?y:f[m];{let{name:x,params:A}=this.parseTypeName(w);return this.getTypeInterface(x)._encodeRaw.call(this,o,c[h],A,l)}},function(o,c,f){let l=o.readULEB(),h=n[l],p=r[h];if(l===-1)throw new Error(`Decoding type mismatch, expected enum "${i}" invariant index, received "${l}"`);if(p===null)return{[h]:!0};let g=s.indexOf(p),y=g===-1?p:c[g];{let{name:m,params:w}=this.parseTypeName(y);return{[h]:this.getTypeInterface(m)._decodeRaw.call(this,o,w,f)}}})}getTypeInterface(e){let t=this.types.get(e);if(typeof t=="string"){let r=[];for(;typeof t=="string";){if(r.includes(t))throw new Error(`Recursive definition found: ${r.join(" -> ")} -> ${t}`);r.push(t),t=this.types.get(t)}}if(t===void 0)throw new Error(`Type ${e} is not registered`);return t}parseTypeName(e){if(Array.isArray(e)){let[o,...c]=e;return{name:o,params:c}}if(typeof e!="string")throw new Error(`Illegal type passed as a name of the type: ${e}`);let[t,r]=this.schema.genericSeparators||["<",">"],n=e.indexOf(t),i=Array.from(e).reverse().indexOf(r);if(n===-1&&i===-1)return{name:e,params:[]};if(n===-1||i===-1)throw new Error(`Unclosed generic in name '${e}'`);let s=e.slice(0,n),a=Gt(e.slice(n+1,e.length-i-1),this.schema.genericSeparators);return{name:s,params:a}}};let T=ye;T.U8="u8";T.U16="u16";T.U32="u32";T.U64="u64";T.U128="u128";T.U256="u256";T.BOOL="bool";T.VECTOR="vector";T.ADDRESS="address";T.STRING="string";T.HEX="hex-string";T.BASE58="base58-string";T.BASE64="base64-string";function Ur(e){e.registerType(T.U8,function(t,r){return t.write8(r)},function(t){return t.read8()},t=>t<256),e.registerType(T.U16,function(t,r){return t.write16(r)},function(t){return t.read16()},t=>t<65536),e.registerType(T.U32,function(t,r){return t.write32(r)},function(t){return t.read32()},t=>t<=4294967296n),e.registerType(T.U64,function(t,r){return t.write64(r)},function(t){return t.read64()}),e.registerType(T.U128,function(t,r){return t.write128(r)},function(t){return t.read128()}),e.registerType(T.U256,function(t,r){return t.write256(r)},function(t){return t.read256()}),e.registerType(T.BOOL,function(t,r){return t.write8(r)},function(t){return t.read8().toString(10)==="1"}),e.registerType(T.STRING,function(t,r){return t.writeVec(Array.from(r),(n,i)=>n.write8(i.charCodeAt(0)))},function(t){return t.readVec(r=>r.read8()).map(r=>String.fromCharCode(Number(r))).join("")},t=>!0),e.registerType(T.HEX,function(t,r){return t.writeVec(Array.from(He(r)),(n,i)=>n.write8(i))},function(t){let r=t.readVec(n=>n.read8());return Oe(new Uint8Array(r))}),e.registerType(T.BASE58,function(t,r){return t.writeVec(Array.from(at(r)),(n,i)=>n.write8(i))},function(t){let r=t.readVec(n=>n.read8());return xe(new Uint8Array(r))}),e.registerType(T.BASE64,function(t,r){return t.writeVec(Array.from(ae(r)),(n,i)=>n.write8(i))},function(t){let r=t.readVec(n=>n.read8());return Ae(new Uint8Array(r))})}function _r(){return{genericSeparators:["<",">"],vectorType:"vector",addressLength:jr,addressEncoding:"hex"}}const ut=32;function kr(e){return $r(e)&&Cr(e)===ut}function k(e,t=!1){let r=e.toLowerCase();return!t&&r.startsWith("0x")&&(r=r.slice(2)),`0x${r.padStart(ut*2,"0")}`}function Se(e,t=!1){return k(e,t)}function $r(e){return/^(0x|0X)?[a-fA-F0-9]+$/.test(e)&&e.length%2===0}function Cr(e){return/^(0x|0X)/.test(e)?(e.length-2)/2:e.length/2}class Rr extends TypeError{constructor(t,r){let n;const{message:i,explanation:s,...a}=t,{path:o}=t,c=o.length===0?i:`At path: ${o.join(".")} -- ${i}`;super(s??c),s!=null&&(this.cause=c),Object.assign(this,a),this.name=this.constructor.name,this.failures=()=>n??(n=[t,...r()])}}function Nr(e){return Q(e)&&typeof e[Symbol.iterator]=="function"}function Q(e){return typeof e=="object"&&e!=null}function F(e){return typeof e=="symbol"?e.toString():typeof e=="string"?JSON.stringify(e):`${e}`}function Mr(e){const{done:t,value:r}=e.next();return t?void 0:r}function Dr(e,t,r,n){if(e===!0)return;e===!1?e={}:typeof e=="string"&&(e={message:e});const{path:i,branch:s}=t,{type:a}=r,{refinement:o,message:c=`Expected a value of type \`${a}\`${o?` with refinement \`${o}\``:""}, but received: \`${F(n)}\``}=e;return{value:n,type:a,refinement:o,key:i[i.length-1],path:i,branch:s,...e,message:c}}function*Rt(e,t,r,n){Nr(e)||(e=[e]);for(const i of e){const s=Dr(i,t,r,n);s&&(yield s)}}function*ft(e,t,r={}){const{path:n=[],branch:i=[e],coerce:s=!1,mask:a=!1}=r,o={path:n,branch:i};if(s&&(e=t.coercer(e,o),a&&t.type!=="type"&&Q(t.schema)&&Q(e)&&!Array.isArray(e)))for(const f in e)t.schema[f]===void 0&&delete e[f];let c="valid";for(const f of t.validator(e,o))f.explanation=r.message,c="not_valid",yield[f,void 0];for(let[f,l,h]of t.entries(e,o)){const p=ft(l,h,{path:f===void 0?n:[...n,f],branch:f===void 0?i:[...i,l],coerce:s,mask:a,message:r.message});for(const g of p)g[0]?(c=g[0].refinement!=null?"not_refined":"not_valid",yield[g[0],void 0]):s&&(l=g[1],f===void 0?e=l:e instanceof Map?e.set(f,l):e instanceof Set?e.add(l):Q(e)&&(l!==void 0||f in e)&&(e[f]=l))}if(c!=="not_valid")for(const f of t.refiner(e,o))f.explanation=r.message,c="not_refined",yield[f,void 0];c==="valid"&&(yield[void 0,e])}class ce{constructor(t){const{type:r,schema:n,validator:i,refiner:s,coercer:a=c=>c,entries:o=function*(){}}=t;this.type=r,this.schema=n,this.entries=o,this.coercer=a,i?this.validator=(c,f)=>{const l=i(c,f);return Rt(l,f,this,c)}:this.validator=()=>[],s?this.refiner=(c,f)=>{const l=s(c,f);return Rt(l,f,this,c)}:this.refiner=()=>[]}assert(t,r){return Qe(t,this,r)}create(t,r){return Xt(t,this,r)}is(t){return ee(t,this)}mask(t,r){return Jt(t,this,r)}validate(t,r={}){return Ie(t,this,r)}}function Qe(e,t,r){const n=Ie(e,t,{message:r});if(n[0])throw n[0]}function Xt(e,t,r){const n=Ie(e,t,{coerce:!0,message:r});if(n[0])throw n[0];return n[1]}function Jt(e,t,r){const n=Ie(e,t,{coerce:!0,mask:!0,message:r});if(n[0])throw n[0];return n[1]}function ee(e,t){return!Ie(e,t)[0]}function Ie(e,t,r={}){const n=ft(e,t,r),i=Mr(n);return i[0]?[new Rr(i[0],function*(){for(const a of n)a[0]&&(yield a[0])}),void 0]:[void 0,i[1]]}function W(e,t){return new ce({type:e,schema:null,validator:t})}function Nt(){return W("any",()=>!0)}function U(e){return new ce({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(const[r,n]of t.entries())yield[r,n,e]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||`Expected an array value, but received: ${F(t)}`}})}function zr(){return W("bigint",e=>typeof e=="bigint")}function Pr(){return W("boolean",e=>typeof e=="boolean")}function H(){return W("integer",e=>typeof e=="number"&&!isNaN(e)&&Number.isInteger(e)||`Expected an integer, but received: ${F(e)}`)}function I(e){const t=F(e),r=typeof e;return new ce({type:"literal",schema:r==="string"||r==="number"||r==="boolean"?e:null,validator(n){return n===e||`Expected the literal \`${t}\`, but received: ${F(n)}`}})}function Vr(){return W("never",()=>!1)}function Lr(e){return new ce({...e,validator:(t,r)=>t===null||e.validator(t,r),refiner:(t,r)=>t===null||e.refiner(t,r)})}function Gr(){return W("number",e=>typeof e=="number"&&!isNaN(e)||`Expected a number, but received: ${F(e)}`)}function E(e){const t=e?Object.keys(e):[],r=Vr();return new ce({type:"object",schema:e||null,*entries(n){if(e&&Q(n)){const i=new Set(Object.keys(n));for(const s of t)i.delete(s),yield[s,n[s],e[s]];for(const s of i)yield[s,n[s],r]}},validator(n){return Q(n)||`Expected an object, but received: ${F(n)}`},coercer(n){return Q(n)?{...n}:n}})}function K(e){return new ce({...e,validator:(t,r)=>t===void 0||e.validator(t,r),refiner:(t,r)=>t===void 0||e.refiner(t,r)})}function Kr(e,t){return new ce({type:"record",schema:null,*entries(r){if(Q(r))for(const n in r){const i=r[n];yield[n,n,e],yield[n,i,t]}},validator(r){return Q(r)||`Expected an object, but received: ${F(r)}`}})}function R(){return W("string",e=>typeof e=="string"||`Expected a string, but received: ${F(e)}`)}function L(e){const t=e.map(r=>r.type).join(" | ");return new ce({type:"union",schema:null,coercer(r){for(const n of e){const[i,s]=n.validate(r,{coerce:!0});if(!i)return s}return r},validator(r,n){const i=[];for(const s of e){const[...a]=ft(r,s,n),[o]=a;if(o[0])for(const[c]of a)c&&i.push(c);else return[]}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${F(r)}`,...i]}})}function Hr(){return W("unknown",()=>!0)}BigInt(1e9);const lt="0x1",Zt="0x2";Se("0x6");const Fr=`${Zt}::sui::SUI`;Se("0x5");function $(e,t){return Xt(e,t)}function et(e){return typeof e=="object"&&"MutableReference"in e?e.MutableReference:void 0}function qt(e){return typeof e=="object"&&"Reference"in e?e.Reference:void 0}function ht(e){if(typeof e=="object"&&"Struct"in e)return e;const t=qt(e),r=et(e);if(typeof t=="object"&&"Struct"in t)return t;if(typeof r=="object"&&"Struct"in r)return r}const Wr="object",Xr="ID",Jr="ascii",Zr="String",qr="string",Yr="String",Qr="option",en="Option",tn={address:Zt,module:Wr,name:Xr},rn={address:lt,module:Jr,name:Zr},nn={address:lt,module:qr,name:Yr},sn={address:lt,module:Qr,name:en},je=(e,t)=>e.address===t.address&&e.module===t.module&&e.name===t.name;function an(e){var r;const t=(r=ht(e))==null?void 0:r.Struct;return(t==null?void 0:t.address)==="0x2"&&(t==null?void 0:t.module)==="tx_context"&&(t==null?void 0:t.name)==="TxContext"}function Ze(e,t){if(!(typeof t>"u")&&typeof t!==e)throw new Error(`Expect ${t} to be ${e}, received ${typeof t}`)}const on=["Address","Bool","U8","U16","U32","U64","U128","U256"];function tt(e,t){if(typeof e=="string"&&on.includes(e)){if(e in["U8","U16","U32","U64","U128","U256"])Ze("number",t);else if(e==="Bool")Ze("boolean",t);else if(e==="Address"&&(Ze("string",t),t&&!kr(t)))throw new Error("Invalid Sui Address");return e.toLowerCase()}else if(typeof e=="string")throw new Error(`Unknown pure normalized type ${JSON.stringify(e,null,2)}`);if("Vector"in e){if((t===void 0||typeof t=="string")&&e.Vector==="U8")return"string";if(t!==void 0&&!Array.isArray(t))throw new Error(`Expect ${t} to be a array, received ${typeof t}`);const r=tt(e.Vector,t?t[0]:void 0);return r===void 0?void 0:`vector<${r}>`}if("Struct"in e){if(je(e.Struct,rn))return"string";if(je(e.Struct,nn))return"utf8string";if(je(e.Struct,tn))return"address";if(je(e.Struct,sn)){const r={Vector:e.Struct.typeArguments[0]};return tt(r,t)}}}const cn=/^vector<(.+)>$/,un=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/;class q{static parseFromStr(t,r=!1){if(t==="address")return{address:null};if(t==="bool")return{bool:null};if(t==="u8")return{u8:null};if(t==="u16")return{u16:null};if(t==="u32")return{u32:null};if(t==="u64")return{u64:null};if(t==="u128")return{u128:null};if(t==="u256")return{u256:null};if(t==="signer")return{signer:null};const n=t.match(cn);if(n)return{vector:q.parseFromStr(n[1],r)};const i=t.match(un);if(i)return{struct:{address:r?k(i[1]):i[1],module:i[2],name:i[3],typeParams:i[5]===void 0?[]:q.parseStructTypeArgs(i[5],r)}};throw new Error(`Encountered unexpected token when parsing type args for ${t}`)}static parseStructTypeArgs(t,r=!1){return Gt(t).map(n=>q.parseFromStr(n,r))}static tagToString(t){if("bool"in t)return"bool";if("u8"in t)return"u8";if("u16"in t)return"u16";if("u32"in t)return"u32";if("u64"in t)return"u64";if("u128"in t)return"u128";if("u256"in t)return"u256";if("address"in t)return"address";if("signer"in t)return"signer";if("vector"in t)return`vector<${q.tagToString(t.vector)}>`;if("struct"in t){const r=t.struct,n=r.typeParams.map(q.tagToString).join(", ");return`${r.address}::${r.module}::${r.name}${n?`<${n}>`:""}`}throw new Error("Invalid TypeTag")}}const v=new T({..._r(),types:{enums:{"Option<T>":{None:null,Some:"T"}}}});function Yt(e){return u.u64({name:"unsafe_u64",...e}).transform({input:t=>t,output:t=>Number(t)})}function fn(e){return u.enum("Option",{None:null,Some:e})}function dt(e){return e.transform({input:t=>({[t.kind]:t}),output:t=>{const r=Object.keys(t)[0];return{kind:r,...t[r]}}})}const V=u.bytes(ut).transform({input:e=>typeof e=="string"?He(k(e)):e,output:e=>k(Oe(e))}),gt=u.vector(u.u8()).transform({name:"ObjectDigest",input:e=>at(e),output:e=>xe(new Uint8Array(e))}),ve=u.struct("SuiObjectRef",{objectId:V,version:u.u64(),digest:gt}),pt=u.struct("SharedObjectRef",{objectId:V,initialSharedVersion:u.u64(),mutable:u.bool()}),Pe=u.enum("ObjectArg",{ImmOrOwned:ve,Shared:pt,Receiving:ve}),yt=u.enum("CallArg",{Pure:u.vector(u.u8()),Object:Pe,ObjVec:u.vector(Pe)}),ge=u.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:u.lazy(()=>ge),struct:u.lazy(()=>Tt),u16:null,u32:null,u256:null}),D=dt(u.enum("Argument",{GasCoin:null,Input:u.struct("Input",{index:u.u16()}),Result:u.struct("Result",{index:u.u16()}),NestedResult:u.struct("NestedResult",{index:u.u16(),resultIndex:u.u16()})})),mt=u.struct("ProgrammableMoveCall",{package:V,module:u.string(),function:u.string(),type_arguments:u.vector(ge),arguments:u.vector(D)}).transform({input:e=>{const[t,r,n]=e.target.split("::"),i=e.typeArguments.map(s=>q.parseFromStr(s,!0));return{package:k(t),module:r,function:n,type_arguments:i,arguments:e.arguments}},output:e=>({target:[e.package,e.module,e.function].join("::"),arguments:e.arguments,typeArguments:e.type_arguments.map(q.tagToString)})}),wt=dt(u.enum("Transaction",{MoveCall:mt,TransferObjects:u.struct("TransferObjects",{objects:u.vector(D),address:D}),SplitCoins:u.struct("SplitCoins",{coin:D,amounts:u.vector(D)}),MergeCoins:u.struct("MergeCoins",{destination:D,sources:u.vector(D)}),Publish:u.struct("Publish",{modules:u.vector(u.vector(u.u8())),dependencies:u.vector(V)}),MakeMoveVec:u.struct("MakeMoveVec",{type:fn(ge),objects:u.vector(D)}),Upgrade:u.struct("Upgrade",{modules:u.vector(u.vector(u.u8())),dependencies:u.vector(V),packageId:V,ticket:D})})),bt=u.struct("ProgrammableTransaction",{inputs:u.vector(yt),transactions:u.vector(wt)}),St=u.enum("TransactionKind",{ProgrammableTransaction:bt,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),vt=u.enum("TransactionExpiration",{None:null,Epoch:Yt()}),Tt=u.struct("StructTag",{address:V,module:u.string(),name:u.string(),typeParams:u.vector(ge)}),Et=u.struct("GasData",{payment:u.vector(ve),owner:V,price:u.u64(),budget:u.u64()}),xt=u.struct("TransactionDataV1",{kind:St,sender:V,gasData:Et,expiration:vt}),At=u.enum("TransactionData",{V1:xt}),ln=u.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),hn=u.enum("IntentVersion",{V0:null}),dn=u.enum("AppId",{Sui:null}),gn=u.struct("Intent",{scope:ln,version:hn,appId:dn}),pn=u.generic(["T"],e=>u.struct("IntentMessage<T>",{intent:gn,value:e})),Ot=u.enum("CompressedSignature",{ED25519:u.fixedArray(64,u.u8()),Secp256k1:u.fixedArray(64,u.u8()),Secp256r1:u.fixedArray(64,u.u8()),ZkLogin:u.vector(u.u8())}),It=u.enum("PublicKey",{ED25519:u.fixedArray(32,u.u8()),Secp256k1:u.fixedArray(33,u.u8()),Secp256r1:u.fixedArray(33,u.u8()),ZkLogin:u.vector(u.u8())}),Bt=u.struct("MultiSigPkMap",{pubKey:It,weight:u.u8()}),jt=u.struct("MultiSigPublicKey",{pk_map:u.vector(Bt),threshold:u.u16()}),Qt=u.struct("MultiSig",{sigs:u.vector(Ot),bitmap:u.u16(),multisig_pk:jt}),yn=u.vector(u.u8()).transform({input:e=>typeof e=="string"?ae(e):e,output:e=>Ae(new Uint8Array(e))}),er=u.struct("SenderSignedTransaction",{intentMessage:pn(At),txSignatures:u.vector(yn)}),tr=u.vector(er,{name:"SenderSignedData"}),B={...u,U8:u.u8(),U16:u.u16(),U32:u.u32(),U64:u.u64(),U128:u.u128(),U256:u.u256(),ULEB128:u.uleb128(),Bool:u.bool(),String:u.string(),Address:V,Argument:D,CallArg:yt,CompressedSignature:Ot,GasData:Et,MultiSig:Qt,MultiSigPkMap:Bt,MultiSigPublicKey:jt,ObjectArg:Pe,ObjectDigest:gt,ProgrammableMoveCall:mt,ProgrammableTransaction:bt,PublicKey:It,SenderSignedData:tr,SenderSignedTransaction:er,SharedObjectRef:pt,StructTag:Tt,SuiObjectRef:ve,Transaction:wt,TransactionData:At,TransactionDataV1:xt,TransactionExpiration:vt,TransactionKind:St,TypeTag:ge,ser:v.ser.bind(v),de:v.de.bind(v),getTypeInterface:v.getTypeInterface.bind(v),hasType:v.hasType.bind(v),parseTypeName:v.parseTypeName.bind(v),registerAddressType:v.registerAddressType.bind(v),registerAlias:v.registerAlias.bind(v),registerBcsType:v.registerBcsType.bind(v),registerEnumType:v.registerEnumType.bind(v),registerStructType:v.registerStructType.bind(v),registerType:v.registerType.bind(v),types:v.types};v.registerBcsType("utf8string",()=>u.string({name:"utf8string"}));v.registerBcsType("unsafe_u64",()=>Yt());v.registerBcsType("enumKind",e=>dt(e));[V,D,yt,Ot,Et,Qt,Bt,jt,Pe,gt,mt,bt,It,tr,pt,Tt,ve,wt,At,xt,vt,St,ge].forEach(e=>{v.registerBcsType(e.name,()=>e)});const Ve=E({digest:R(),objectId:R(),version:L([Gr(),R(),zr()])}),mn=L([E({ImmOrOwned:Ve}),E({Shared:E({objectId:R(),initialSharedVersion:L([H(),R()]),mutable:Pr()})}),E({Receiving:Ve})]),Le=E({Pure:U(H())}),rt=E({Object:mn}),Ge=L([Le,rt]);function wn(e,t){return{Pure:Array.from(e instanceof Uint8Array?e:ct(e)?e.toBytes():B.ser(t,e,{maxSize:1/0}).toBytes())}}const C={Pure:wn,ObjectRef({objectId:e,digest:t,version:r}){return{Object:{ImmOrOwned:{digest:t,version:r,objectId:k(e)}}}},SharedObjectRef({objectId:e,mutable:t,initialSharedVersion:r}){return{Object:{Shared:{mutable:t,initialSharedVersion:r,objectId:k(e)}}}},ReceivingRef({objectId:e,digest:t,version:r}){return{Object:{Receiving:{digest:t,version:r,objectId:k(e)}}}}};function Mt(e){return typeof e=="string"?k(e):"ImmOrOwned"in e.Object?k(e.Object.ImmOrOwned.objectId):"Receiving"in e.Object?k(e.Object.Receiving.objectId):k(e.Object.Shared.objectId)}function bn(e){return typeof e=="object"&&"Object"in e&&"Shared"in e.Object?e.Object.Shared:void 0}function Sn(e){var t;return((t=bn(e))==null?void 0:t.mutable)??!1}const vn=e=>L([E({None:L([I(!0),I(null)])}),E({Some:e})]),Te=L([E({kind:I("Input"),index:H(),value:K(Nt()),type:K(I("object"))}),E({kind:I("Input"),index:H(),value:K(Nt()),type:I("pure")})]),Tn=[Te,E({kind:I("GasCoin")}),E({kind:I("Result"),index:H()}),E({kind:I("NestedResult"),index:H(),resultIndex:H()})],te=L([...Tn]),rr=E({kind:I("MoveCall"),target:W("target",R().validator),typeArguments:U(R()),arguments:U(te)}),nr=E({kind:I("TransferObjects"),objects:U(te),address:te}),ir=E({kind:I("SplitCoins"),coin:te,amounts:U(te)}),sr=E({kind:I("MergeCoins"),destination:te,sources:U(te)}),ar=E({kind:I("MakeMoveVec"),type:K(vn(Kr(R(),Hr()))),objects:U(te)}),or=E({kind:I("Publish"),modules:U(U(H())),dependencies:U(R())}),cr=E({kind:I("Upgrade"),modules:U(U(H())),dependencies:U(R()),packageId:R(),ticket:te}),En=[rr,nr,ir,sr,or,cr,ar],xn=L([...En]),ue={MoveCall(e){return $({kind:"MoveCall",target:e.target,arguments:e.arguments??[],typeArguments:e.typeArguments??[]},rr)},TransferObjects(e,t){return t.kind==="Input"&&t.type==="pure"&&typeof t.value!="object"&&(t.value=C.Pure(B.Address.serialize(t.value))),$({kind:"TransferObjects",objects:e,address:t},nr)},SplitCoins(e,t){return t.forEach(r=>{r.kind==="Input"&&r.type==="pure"&&typeof r.value!="object"&&(r.value=C.Pure(B.U64.serialize(r.value)))}),$({kind:"SplitCoins",coin:e,amounts:t},ir)},MergeCoins(e,t){return $({kind:"MergeCoins",destination:e,sources:t},sr)},Publish({modules:e,dependencies:t}){return $({kind:"Publish",modules:e.map(r=>typeof r=="string"?Array.from(ae(r)):r),dependencies:t.map(r=>Se(r))},or)},Upgrade({modules:e,dependencies:t,packageId:r,ticket:n}){return $({kind:"Upgrade",modules:e.map(i=>typeof i=="string"?Array.from(ae(i)):i),dependencies:t.map(i=>Se(i)),packageId:r,ticket:n},cr)},MakeMoveVec({type:e,objects:t}){return $({kind:"MakeMoveVec",type:e?{Some:q.parseFromStr(e)}:{None:null},objects:t},ar)}};function An(e){function t(r,n){return e(r,n)}return t.u8=r=>e(B.U8.serialize(r)),t.u16=r=>e(B.U16.serialize(r)),t.u32=r=>e(B.U32.serialize(r)),t.u64=r=>e(B.U64.serialize(r)),t.u128=r=>e(B.U128.serialize(r)),t.u256=r=>e(B.U256.serialize(r)),t.bool=r=>e(B.Bool.serialize(r)),t.string=r=>e(B.String.serialize(r)),t.address=r=>e(B.Address.serialize(r)),t.id=t.address,t}function qe(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function On(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function ur(e,...t){if(!On(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function Dt(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function In(e,t){ur(e);const r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ke=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),fe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,fr=e=>e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255,Z=fe?e=>e:e=>fr(e);function he(e){for(let t=0;t<e.length;t++)e[t]=fr(e[t])}function Bn(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function be(e){return typeof e=="string"&&(e=Bn(e)),ur(e),e}class jn{clone(){return this._cloneInto()}}function Un(e){const t=(n,i)=>e(i).update(be(n)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=n=>e(n),t}const _n=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3]);class kn extends jn{constructor(t,r,n={},i,s,a){if(super(),this.blockLen=t,this.outputLen=r,this.length=0,this.pos=0,this.finished=!1,this.destroyed=!1,qe(t),qe(r),qe(i),r<0||r>i)throw new Error("outputLen bigger than keyLen");if(n.key!==void 0&&(n.key.length<1||n.key.length>i))throw new Error(`key must be up 1..${i} byte long or undefined`);if(n.salt!==void 0&&n.salt.length!==s)throw new Error(`salt must be ${s} byte long or undefined`);if(n.personalization!==void 0&&n.personalization.length!==a)throw new Error(`personalization must be ${a} byte long or undefined`);this.buffer32=Ke(this.buffer=new Uint8Array(t))}update(t){Dt(this);const{blockLen:r,buffer:n,buffer32:i}=this;t=be(t);const s=t.length,a=t.byteOffset,o=t.buffer;for(let c=0;c<s;){this.pos===r&&(fe||he(i),this.compress(i,0,!1),fe||he(i),this.pos=0);const f=Math.min(r-this.pos,s-c),l=a+c;if(f===r&&!(l%4)&&c+f<s){const h=new Uint32Array(o,l,Math.floor((s-c)/4));fe||he(h);for(let p=0;c+r<s;p+=i.length,c+=r)this.length+=r,this.compress(h,p,!1);fe||he(h);continue}n.set(t.subarray(c,c+f),this.pos),this.pos+=f,this.length+=f,c+=f}return this}digestInto(t){Dt(this),In(t,this);const{pos:r,buffer32:n}=this;this.finished=!0,this.buffer.subarray(r).fill(0),fe||he(n),this.compress(n,0,!0),fe||he(n);const i=Ke(t);this.get().forEach((s,a)=>i[a]=Z(s))}digest(){const{buffer:t,outputLen:r}=this;this.digestInto(t);const n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){const{buffer:r,length:n,finished:i,destroyed:s,outputLen:a,pos:o}=this;return t||(t=new this.constructor({dkLen:a})),t.set(...this.get()),t.length=n,t.finished=i,t.destroyed=s,t.outputLen=a,t.buffer.set(r),t.pos=o,t}}const Ue=BigInt(2**32-1),nt=BigInt(32);function lr(e,t=!1){return t?{h:Number(e&Ue),l:Number(e>>nt&Ue)}:{h:Number(e>>nt&Ue)|0,l:Number(e&Ue)|0}}function $n(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:s,l:a}=lr(e[i],t);[r[i],n[i]]=[s,a]}return[r,n]}const Cn=(e,t)=>BigInt(e>>>0)<<nt|BigInt(t>>>0),Rn=(e,t,r)=>e>>>r,Nn=(e,t,r)=>e<<32-r|t>>>r,Mn=(e,t,r)=>e>>>r|t<<32-r,Dn=(e,t,r)=>e<<32-r|t>>>r,zn=(e,t,r)=>e<<64-r|t>>>r-32,Pn=(e,t,r)=>e>>>r-32|t<<64-r,Vn=(e,t)=>t,Ln=(e,t)=>e,Gn=(e,t,r)=>e<<r|t>>>32-r,Kn=(e,t,r)=>t<<r|e>>>32-r,Hn=(e,t,r)=>t<<r-32|e>>>64-r,Fn=(e,t,r)=>e<<r-32|t>>>64-r;function Wn(e,t,r,n){const i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:i|0}}const Xn=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),Jn=(e,t,r,n)=>t+r+n+(e/2**32|0)|0,Zn=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),qn=(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0,Yn=(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0),Qn=(e,t,r,n,i,s)=>t+r+n+i+s+(e/2**32|0)|0,_={fromBig:lr,split:$n,toBig:Cn,shrSH:Rn,shrSL:Nn,rotrSH:Mn,rotrSL:Dn,rotrBH:zn,rotrBL:Pn,rotr32H:Vn,rotr32L:Ln,rotlSH:Gn,rotlSL:Kn,rotlBH:Hn,rotlBL:Fn,add:Wn,add3L:Xn,add3H:Jn,add4L:Zn,add4H:qn,add5H:Qn,add5L:Yn},O=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),d=new Uint32Array(32);function ne(e,t,r,n,i,s){const a=i[s],o=i[s+1];let c=d[2*e],f=d[2*e+1],l=d[2*t],h=d[2*t+1],p=d[2*r],g=d[2*r+1],y=d[2*n],m=d[2*n+1],w=_.add3L(c,l,a);f=_.add3H(w,f,h,o),c=w|0,{Dh:m,Dl:y}={Dh:m^f,Dl:y^c},{Dh:m,Dl:y}={Dh:_.rotr32H(m,y),Dl:_.rotr32L(m,y)},{h:g,l:p}=_.add(g,p,m,y),{Bh:h,Bl:l}={Bh:h^g,Bl:l^p},{Bh:h,Bl:l}={Bh:_.rotrSH(h,l,24),Bl:_.rotrSL(h,l,24)},d[2*e]=c,d[2*e+1]=f,d[2*t]=l,d[2*t+1]=h,d[2*r]=p,d[2*r+1]=g,d[2*n]=y,d[2*n+1]=m}function ie(e,t,r,n,i,s){const a=i[s],o=i[s+1];let c=d[2*e],f=d[2*e+1],l=d[2*t],h=d[2*t+1],p=d[2*r],g=d[2*r+1],y=d[2*n],m=d[2*n+1],w=_.add3L(c,l,a);f=_.add3H(w,f,h,o),c=w|0,{Dh:m,Dl:y}={Dh:m^f,Dl:y^c},{Dh:m,Dl:y}={Dh:_.rotrSH(m,y,16),Dl:_.rotrSL(m,y,16)},{h:g,l:p}=_.add(g,p,m,y),{Bh:h,Bl:l}={Bh:h^g,Bl:l^p},{Bh:h,Bl:l}={Bh:_.rotrBH(h,l,63),Bl:_.rotrBL(h,l,63)},d[2*e]=c,d[2*e+1]=f,d[2*t]=l,d[2*t+1]=h,d[2*r]=p,d[2*r+1]=g,d[2*n]=y,d[2*n+1]=m}class ei extends kn{constructor(t={}){super(128,t.dkLen===void 0?64:t.dkLen,t,64,16,16),this.v0l=O[0]|0,this.v0h=O[1]|0,this.v1l=O[2]|0,this.v1h=O[3]|0,this.v2l=O[4]|0,this.v2h=O[5]|0,this.v3l=O[6]|0,this.v3h=O[7]|0,this.v4l=O[8]|0,this.v4h=O[9]|0,this.v5l=O[10]|0,this.v5h=O[11]|0,this.v6l=O[12]|0,this.v6h=O[13]|0,this.v7l=O[14]|0,this.v7h=O[15]|0;const r=t.key?t.key.length:0;if(this.v0l^=this.outputLen|r<<8|65536|1<<24,t.salt){const n=Ke(be(t.salt));this.v4l^=Z(n[0]),this.v4h^=Z(n[1]),this.v5l^=Z(n[2]),this.v5h^=Z(n[3])}if(t.personalization){const n=Ke(be(t.personalization));this.v6l^=Z(n[0]),this.v6h^=Z(n[1]),this.v7l^=Z(n[2]),this.v7h^=Z(n[3])}if(t.key){const n=new Uint8Array(this.blockLen);n.set(be(t.key)),this.update(n)}}get(){let{v0l:t,v0h:r,v1l:n,v1h:i,v2l:s,v2h:a,v3l:o,v3h:c,v4l:f,v4h:l,v5l:h,v5h:p,v6l:g,v6h:y,v7l:m,v7h:w}=this;return[t,r,n,i,s,a,o,c,f,l,h,p,g,y,m,w]}set(t,r,n,i,s,a,o,c,f,l,h,p,g,y,m,w){this.v0l=t|0,this.v0h=r|0,this.v1l=n|0,this.v1h=i|0,this.v2l=s|0,this.v2h=a|0,this.v3l=o|0,this.v3h=c|0,this.v4l=f|0,this.v4h=l|0,this.v5l=h|0,this.v5h=p|0,this.v6l=g|0,this.v6h=y|0,this.v7l=m|0,this.v7h=w|0}compress(t,r,n){this.get().forEach((c,f)=>d[f]=c),d.set(O,16);let{h:i,l:s}=_.fromBig(BigInt(this.length));d[24]=O[8]^s,d[25]=O[9]^i,n&&(d[28]=~d[28],d[29]=~d[29]);let a=0;const o=_n;for(let c=0;c<12;c++)ne(0,4,8,12,t,r+2*o[a++]),ie(0,4,8,12,t,r+2*o[a++]),ne(1,5,9,13,t,r+2*o[a++]),ie(1,5,9,13,t,r+2*o[a++]),ne(2,6,10,14,t,r+2*o[a++]),ie(2,6,10,14,t,r+2*o[a++]),ne(3,7,11,15,t,r+2*o[a++]),ie(3,7,11,15,t,r+2*o[a++]),ne(0,5,10,15,t,r+2*o[a++]),ie(0,5,10,15,t,r+2*o[a++]),ne(1,6,11,12,t,r+2*o[a++]),ie(1,6,11,12,t,r+2*o[a++]),ne(2,7,8,13,t,r+2*o[a++]),ie(2,7,8,13,t,r+2*o[a++]),ne(3,4,9,14,t,r+2*o[a++]),ie(3,4,9,14,t,r+2*o[a++]);this.v0l^=d[0]^d[16],this.v0h^=d[1]^d[17],this.v1l^=d[2]^d[18],this.v1h^=d[3]^d[19],this.v2l^=d[4]^d[20],this.v2h^=d[5]^d[21],this.v3l^=d[6]^d[22],this.v3h^=d[7]^d[23],this.v4l^=d[8]^d[24],this.v4h^=d[9]^d[25],this.v5l^=d[10]^d[26],this.v5h^=d[11]^d[27],this.v6l^=d[12]^d[28],this.v6h^=d[13]^d[29],this.v7l^=d[14]^d[30],this.v7h^=d[15]^d[31],d.fill(0)}destroy(){this.destroyed=!0,this.buffer32.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const ti=Un(e=>new ei(e));function ri(e,t){const r=Array.from(`${e}::`).map(i=>i.charCodeAt(0)),n=new Uint8Array(r.length+t.length);return n.set(r),n.set(t,r.length),ti(n,{dkLen:32})}const ni=K(Lr(L([E({Epoch:H()}),E({None:L([I(!0),I(null)])})]))),zt=W("StringEncodedBigint",e=>{if(!["string","number","bigint"].includes(typeof e))return!1;try{return BigInt(e),!0}catch{return!1}}),ii=E({budget:K(zt),price:K(zt),payment:K(U(Ve)),owner:K(R())}),_e=E({version:I(1),sender:K(R()),expiration:ni,gasConfig:ii,inputs:U(Te),transactions:U(xn)});function Pt(e){return k(e).replace("0x","")}class Y{constructor(t){this.version=1,this.sender=t==null?void 0:t.sender,this.expiration=t==null?void 0:t.expiration,this.gasConfig=(t==null?void 0:t.gasConfig)??{},this.inputs=(t==null?void 0:t.inputs)??[],this.transactions=(t==null?void 0:t.transactions)??[]}static fromKindBytes(t){const r=B.TransactionKind.parse(t),n="ProgrammableTransaction"in r?r.ProgrammableTransaction:null;if(!n)throw new Error("Unable to deserialize from bytes.");const i=$({version:1,gasConfig:{},inputs:n.inputs.map((s,a)=>$({kind:"Input",value:s,index:a,type:ee(s,Le)?"pure":"object"},Te)),transactions:n.transactions},_e);return Y.restore(i)}static fromBytes(t){var a;const r=B.TransactionData.parse(t),n=r==null?void 0:r.V1,i="ProgrammableTransaction"in n.kind?(a=n==null?void 0:n.kind)==null?void 0:a.ProgrammableTransaction:null;if(!n||!i)throw new Error("Unable to deserialize from bytes.");const s=$({version:1,sender:n.sender,expiration:n.expiration,gasConfig:n.gasData,inputs:i.inputs.map((o,c)=>$({kind:"Input",value:o,index:c,type:ee(o,Le)?"pure":"object"},Te)),transactions:i.transactions},_e);return Y.restore(s)}static restore(t){Qe(t,_e);const r=new Y;return Object.assign(r,t),r}static getDigestFromBytes(t){const r=ri("TransactionData",t);return xe(r)}build({maxSizeBytes:t=1/0,overrides:r,onlyTransactionKind:n}={}){const i=this.inputs.map(l=>(Qe(l.value,Ge),l.value)),s={ProgrammableTransaction:{inputs:i,transactions:this.transactions}};if(n)return B.TransactionKind.serialize(s,{maxSize:t}).toBytes();const a=(r==null?void 0:r.expiration)??this.expiration,o=(r==null?void 0:r.sender)??this.sender,c={...this.gasConfig,...r==null?void 0:r.gasConfig};if(!o)throw new Error("Missing transaction sender");if(!c.budget)throw new Error("Missing gas budget");if(!c.payment)throw new Error("Missing gas payment");if(!c.price)throw new Error("Missing gas price");const f={sender:Pt(o),expiration:a||{None:!0},gasData:{payment:c.payment,owner:Pt(this.gasConfig.owner??o),price:BigInt(c.price),budget:BigInt(c.budget)},kind:{ProgrammableTransaction:{inputs:i,transactions:this.transactions}}};return B.TransactionData.serialize({V1:f},{maxSize:t}).toBytes()}getDigest(){const t=this.build({onlyTransactionKind:!1});return Y.getDigestFromBytes(t)}snapshot(){return $(this,_e)}}var Ut=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},S=(e,t,r)=>(Ut(e,t,"read from private field"),r?r.call(e):t.get(e)),J=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},ke=(e,t,r,n)=>(Ut(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),j=(e,t,r)=>(Ut(e,t,"access private method"),r),b,me,Ce,we,Re,oe,le,_t,hr,kt,dr,$t,gr,Ct,pr,Ne,it;const si={maxPureArgumentSize:16*1024,maxTxGas:5e10,maxGasObjects:256,maxTxSizeBytes:128*1024};function ai(e){const t={kind:"Result",index:e},r=[],n=i=>r[i]??(r[i]={kind:"NestedResult",index:e,resultIndex:i});return new Proxy(t,{set(){throw new Error("The transaction result is a proxy, and does not support setting properties directly")},get(i,s){if(s in i)return Reflect.get(i,s);if(s===Symbol.iterator)return function*(){let o=0;for(;;)yield n(o),o++};if(typeof s=="symbol")return;const a=parseInt(s,10);if(!(Number.isNaN(a)||a<0))return n(a)}})}function oi(e){const t=ht(e);return t?t.Struct.address==="0x2"&&t.Struct.module==="transfer"&&t.Struct.name==="Receiving":!1}function Ee(e){if(!e.client)throw new Error("No provider passed to Transaction#build, but transaction data was not sufficient to build offline.");return e.client}const ci=Symbol.for("@mysten/transaction"),Ye={maxTxGas:"max_tx_gas",maxGasObjects:"max_gas_payment_objects",maxTxSizeBytes:"max_tx_size_bytes",maxPureArgumentSize:"max_pure_argument_size"},ui=1000n,fi=50,li=(e,t)=>Array.from({length:Math.ceil(e.length/t)},(r,n)=>e.slice(n*t,n*t+t)),st=class{constructor(e){J(this,me),J(this,we),J(this,oe),J(this,_t),J(this,kt),J(this,$t),J(this,Ct),J(this,Ne),J(this,b,void 0),ke(this,b,new Y(e?e.blockData:void 0))}static fromKind(e){const t=new st;return ke(t,b,Y.fromKindBytes(typeof e=="string"?ae(e):e)),t}static from(e){const t=new st;return typeof e!="string"||!e.startsWith("{")?ke(t,b,Y.fromBytes(typeof e=="string"?ae(e):e)):ke(t,b,Y.restore(JSON.parse(e))),t}setSender(e){S(this,b).sender=e}setSenderIfNotSet(e){S(this,b).sender||(S(this,b).sender=e)}setExpiration(e){S(this,b).expiration=e}setGasPrice(e){S(this,b).gasConfig.price=String(e)}setGasBudget(e){S(this,b).gasConfig.budget=String(e)}setGasOwner(e){S(this,b).gasConfig.owner=e}setGasPayment(e){S(this,b).gasConfig.payment=e.map(t=>Jt(t,Ve))}get blockData(){return S(this,b).snapshot()}get[ci](){return!0}get pure(){return Object.defineProperty(this,"pure",{enumerable:!1,value:An((e,t)=>ct(e)?j(this,me,Ce).call(this,"pure",{Pure:Array.from(e.toBytes())}):j(this,me,Ce).call(this,"pure",e instanceof Uint8Array?C.Pure(e):t?C.Pure(e,t):e))}),this.pure}get gas(){return{kind:"GasCoin"}}object(e){if(typeof e=="object"&&"kind"in e)return e;const t=Mt(e),r=S(this,b).inputs.find(n=>n.type==="object"&&t===Mt(n.value));return r&&ee(r.value,rt)&&"Shared"in r.value.Object&&ee(e,rt)&&"Shared"in e.Object&&(r.value.Object.Shared.mutable=r.value.Object.Shared.mutable||e.Object.Shared.mutable),r??j(this,me,Ce).call(this,"object",typeof e=="string"?k(e):e)}objectRef(...e){return this.object(C.ObjectRef(...e))}receivingRef(...e){return this.object(C.ReceivingRef(...e))}sharedObjectRef(...e){return this.object(C.SharedObjectRef(...e))}add(e){const t=S(this,b).transactions.push(e);return ai(t-1)}splitCoins(e,t){return this.add(ue.SplitCoins(typeof e=="string"?this.object(e):e,t.map(r=>typeof r=="number"||typeof r=="bigint"||typeof r=="string"?this.pure.u64(r):j(this,we,Re).call(this,r))))}mergeCoins(e,t){return this.add(ue.MergeCoins(typeof e=="string"?this.object(e):e,t.map(r=>typeof r=="string"?this.object(r):r)))}publish({modules:e,dependencies:t}){return this.add(ue.Publish({modules:e,dependencies:t}))}upgrade({modules:e,dependencies:t,packageId:r,ticket:n}){return this.add(ue.Upgrade({modules:e,dependencies:t,packageId:r,ticket:typeof n=="string"?this.object(n):n}))}moveCall({arguments:e,typeArguments:t,target:r}){return this.add(ue.MoveCall({arguments:e==null?void 0:e.map(n=>j(this,we,Re).call(this,n)),typeArguments:t,target:r}))}transferObjects(e,t){return this.add(ue.TransferObjects(e.map(r=>typeof r=="string"?this.object(r):r),typeof t=="string"?this.pure.address(t):j(this,we,Re).call(this,t)))}makeMoveVec({type:e,objects:t}){return this.add(ue.MakeMoveVec({type:e,objects:t.map(r=>typeof r=="string"?this.object(r):r)}))}serialize(){return JSON.stringify(S(this,b).snapshot())}async sign(e){const{signer:t,...r}=e,n=await this.build(r);return t.signTransactionBlock(n)}async build(e={}){return await j(this,Ne,it).call(this,e),S(this,b).build({maxSizeBytes:j(this,oe,le).call(this,"maxTxSizeBytes",e),onlyTransactionKind:e.onlyTransactionKind})}async getDigest(e={}){return await j(this,Ne,it).call(this,e),S(this,b).getDigest()}};let di=st;b=new WeakMap;me=new WeakSet;Ce=function(e,t){const r=S(this,b).inputs.length,n=$({kind:"Input",value:typeof t=="bigint"?String(t):t,index:r,type:e},Te);return S(this,b).inputs.push(n),n};we=new WeakSet;Re=function(e){return ct(e)?this.pure(e):e};oe=new WeakSet;le=function(e,{protocolConfig:t,limits:r}){if(r&&typeof r[e]=="number")return r[e];if(!t)return si[e];const n=t==null?void 0:t.attributes[Ye[e]];if(!n)throw new Error(`Missing expected protocol config: "${Ye[e]}"`);const i="u64"in n?n.u64:"u32"in n?n.u32:n.f64;if(!i)throw new Error(`Unexpected protocol config value found for: "${Ye[e]}"`);return Number(i)};_t=new WeakSet;hr=function(e){const t=j(this,oe,le).call(this,"maxPureArgumentSize",e);S(this,b).inputs.forEach((r,n)=>{if(ee(r.value,Le)&&r.value.Pure.length>t)throw new Error(`Input at index ${n} is too large, max pure input size is ${t} bytes, got ${r.value.Pure.length} bytes`)})};kt=new WeakSet;dr=async function(e){if(S(this,b).gasConfig.payment){const i=j(this,oe,le).call(this,"maxGasObjects",e);if(S(this,b).gasConfig.payment.length>i)throw new Error(`Payment objects exceed maximum amount: ${i}`)}if(e.onlyTransactionKind||S(this,b).gasConfig.payment)return;const t=S(this,b).gasConfig.owner??S(this,b).sender,n=(await Ee(e).getCoins({owner:t,coinType:Fr})).data.filter(i=>!S(this,b).inputs.find(a=>ee(a.value,Ge)&&"Object"in a.value&&"ImmOrOwned"in a.value.Object?i.coinObjectId===a.value.Object.ImmOrOwned.objectId:!1)).slice(0,j(this,oe,le).call(this,"maxGasObjects",e)-1).map(i=>({objectId:i.coinObjectId,digest:i.digest,version:i.version}));if(!n.length)throw new Error("No valid gas coins found for the transaction.");this.setGasPayment(n)};$t=new WeakSet;gr=async function(e){e.onlyTransactionKind||S(this,b).gasConfig.price||this.setGasPrice(await Ee(e).getReferenceGasPrice())};Ct=new WeakSet;pr=async function(e){const{inputs:t,transactions:r}=S(this,b),n=[],i=[];if(t.forEach(s=>{if(s.type==="object"&&typeof s.value=="string"){i.push({id:k(s.value),input:s});return}}),r.forEach(s=>{if(s.kind==="MoveCall"&&s.arguments.some(o=>o.kind==="Input"&&!ee(t[o.index].value,Ge))&&n.push(s),s.kind==="SplitCoins"&&s.amounts.forEach(a=>{if(a.kind==="Input"){const o=t[a.index];typeof o.value!="object"&&(o.value=C.Pure(B.U64.serialize(o.value)))}}),s.kind==="TransferObjects"&&s.address.kind==="Input"){const a=t[s.address.index];typeof a.value!="object"&&(a.value=C.Pure(B.Address.serialize(a.value)))}}),n.length&&await Promise.all(n.map(async s=>{const[a,o,c]=s.target.split("::"),f=await Ee(e).getNormalizedMoveFunction({package:Se(a),module:o,function:c}),h=f.parameters.length>0&&an(f.parameters.at(-1))?f.parameters.slice(0,f.parameters.length-1):f.parameters;if(h.length!==s.arguments.length)throw new Error("Incorrect number of arguments.");h.forEach((p,g)=>{const y=s.arguments[g];if(y.kind!=="Input")return;const m=t[y.index];if(ee(m.value,Ge))return;const w=m.value,x=tt(p,w);if(x){m.value=C.Pure(w,x);return}if(ht(p)!=null||typeof p=="object"&&"TypeParameter"in p){if(typeof w!="string")throw new Error(`Expect the argument to be an object id string, got ${JSON.stringify(w,null,2)}`);i.push({id:w,input:m,normalizedType:p});return}throw new Error(`Unknown call arg type ${JSON.stringify(p,null,2)} for value ${JSON.stringify(w,null,2)}`)})})),i.length){const s=[...new Set(i.map(({id:l})=>l))],a=li(s,fi),o=(await Promise.all(a.map(l=>Ee(e).multiGetObjects({ids:l,options:{showOwner:!0}})))).flat();let c=new Map(s.map((l,h)=>[l,o[h]]));const f=Array.from(c).filter(([l,h])=>h.error).map(([l,h])=>l);if(f.length)throw new Error(`The following input objects are invalid: ${f.join(", ")}`);i.forEach(({id:l,input:h,normalizedType:p})=>{var w;const g=c.get(l),y=(w=g.data)==null?void 0:w.owner,m=y&&typeof y=="object"&&"Shared"in y?y.Shared.initial_shared_version:void 0;if(m){const x=p!=null&&et(p)==null&&qt(p)==null,A=Sn(h.value)||x||p!=null&&et(p)!=null;h.value=C.SharedObjectRef({objectId:l,initialSharedVersion:m,mutable:A})}else p&&oi(p)?h.value=C.ReceivingRef(g.data):h.value=C.ObjectRef(g.data)})}};Ne=new WeakSet;it=async function(e){if(!e.onlyTransactionKind&&!S(this,b).sender)throw new Error("Missing transaction sender");if(!e.protocolConfig&&!e.limits&&e.client&&(e.protocolConfig=await e.client.getProtocolConfig()),await Promise.all([j(this,$t,gr).call(this,e),j(this,Ct,pr).call(this,e)]),!e.onlyTransactionKind&&(await j(this,kt,dr).call(this,e),!S(this,b).gasConfig.budget)){const t=await Ee(e).dryRunTransactionBlock({transactionBlock:S(this,b).build({maxSizeBytes:j(this,oe,le).call(this,"maxTxSizeBytes",e),overrides:{gasConfig:{budget:String(j(this,oe,le).call(this,"maxTxGas",e)),payment:[]}}})});if(t.effects.status.status!=="success")throw new Error(`Dry run failed, could not automatically determine a budget: ${t.effects.status.error}`,{cause:t});const r=ui*BigInt(this.blockData.gasConfig.price||1n),n=BigInt(t.effects.gasUsed.computationCost)+r,i=n+BigInt(t.effects.gasUsed.storageCost)-BigInt(t.effects.gasUsed.storageRebate);this.setGasBudget(i>n?i:n)}j(this,_t,hr).call(this,e)};export{di as T};
